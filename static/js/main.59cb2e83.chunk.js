(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),s=a.n(r),c=a(1),i=a.n(c),l=a(7),u=a(2),h=a(3),p=a(5),d=a(4),f=a(6),m=a(8),b="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:k},E=function(e,t){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},y=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(m.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},g=(a(18),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).moveBook=function(){var e=Object(l.a)(i.a.mark(function e(t){var n,o,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.props.book,o=t.target.value,e.next=5,E(n,o);case 5:r=e.sent,a.props.updateShelf(n,o,r),a.props.updateUI(n),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.book;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(".concat(e.hasOwnProperty("imageLinks")?e.imageLinks.thumbnail:"",")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:null==e.shelf?"none":e.shelf,onChange:this.moveBook},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},e.hasOwnProperty("title")?e.title:""),o.a.createElement("div",{className:"book-authors"},e.hasOwnProperty("author")?e.author:"")))}}]),t}(n.Component)),S=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).handleSearch=function(){var t=Object(l.a)(i.a.mark(function t(a){var n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=a.target.value).trim()){t.next=10;break}return e.setState({query:n}),t.next=6,y(n);case 6:(o=t.sent).error?e.setState({books:[]}):e.setState({books:o}),t.next=11;break;case 10:e.setState({books:[]});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e){return t.apply(this,arguments)}}(),e.state={books:[],query:""},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=[],a=this.state.books;return a.length>0&&(t=a.map(function(t){return e.props.mainBooks.forEach(function(e){t.id===e.id&&(t.shelf=e.shelf)}),t})),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",value:this.state.query,onClick:this.props.updateSearchPage},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",onChange:this.handleSearch,placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},t.map(function(t){return o.a.createElement(g,{updateUI:e.props.updateUI,book:t,key:t.id,updateShelf:e.props.updateShelf})}))))}}]),t}(n.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentlyReading,n=t.wantToRead,r=t.read;return o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a.map(function(t){return o.a.createElement(g,{updateUI:e.props.updateUI,book:t,key:t.id,updateShelf:e.props.updateShelf})})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(t){return o.a.createElement(g,{updateUI:e.props.updateUI,updateShelf:e.props.updateShelf,book:t,key:t.id})})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},r.map(function(t){return o.a.createElement(g,{updateUI:e.props.updateUI,book:t,key:t.id,updateShelf:e.props.updateShelf})})))))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).state={showSearchPage:!1,updateSearchPage:function(){return e.setState({showSearchPage:!1})},books:[],currentlyReading:[],wantToRead:[],read:[],updateUI:function(t){e.setState(function(e){return{books:e.books.filter(function(e){return e.id!==t.id}).concat([t])}}),e.state.filterBooks(e.state.books)},filterBooks:function(t){e.setState({books:t});var a=e.state.books.filter(function(e){return"currentlyReading"===e.shelf}),n=t.filter(function(e){return"wantToRead"===e.shelf}),o=t.filter(function(e){return"read"===e.shelf});e.setState({currentlyReading:a,wantToRead:n,read:o})},updateShelf:function(t,a,n){e.state.books.map(function(e){"none"===a?e.id===t.id&&(e.shelf=a):n[a].find(function(t){return t===e.id})&&(e.shelf=a);return e})}},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books});case 3:t=e.sent,this.state.filterBooks(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},this.state.showSearchPage?o.a.createElement(S,{mainBooks:this.state.books,updateShelf:this.state.updateShelf,updateSearchPage:this.state.updateSearchPage,updateUI:this.state.updateUI}):o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(N,{updateUI:this.state.updateUI,updateShelf:this.state.updateShelf,books:this.state.books,currentlyReading:this.state.currentlyReading,wantToRead:this.state.wantToRead,read:this.state.read})),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:function(){return e.setState({showSearchPage:!0})}},"Add a book"))))}}]),t}(o.a.Component);a(20);s.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[11,2,1]]]);
//# sourceMappingURL=main.59cb2e83.chunk.js.map